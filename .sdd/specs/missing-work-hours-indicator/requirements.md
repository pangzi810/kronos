# 機能要件書：欠落工数インジケーター

## 概要
月初から現在日までの工数未入力日を視覚的に表示し、開発者が効率的にデータ入力できるようにする機能。

## ユーザーストーリー

### 開発者として
- **As a** 開発者
- **I want to** 月初から今日までの工数未入力日を一目で確認できる
- **So that** 入力漏れを防ぎ、タイムリーに工数を記録できる

### プロジェクトマネージャーとして
- **As a** PMO/プロジェクトマネージャー
- **I want to** チームメンバーの工数入力状況を確認できる
- **So that** 適切なリマインドと管理ができる

## 機能要件（EARS形式）

### REQ-1: カレンダー表示
**WHEN** ユーザーが工数記録ページにアクセスした時
**THEN** システムは月次カレンダービューを表示すること

**受け入れ基準:**
- カレンダーは現在月を初期表示する
- 日付セルは視覚的に識別可能である
- 週末と祝日が区別される

### REQ-2: 未入力日の識別
**WHERE** カレンダービューにおいて
**THEN** システムは工数未入力日を赤色で強調表示すること

**受け入れ基準:**
- 未入力日は赤色（#FF4444または類似）で表示される
- 月初から現在日までの範囲のみをチェック対象とする
- 未来の日付は評価対象外とする

### REQ-3: ステータス別の色分け
**WHEN** ユーザーがカレンダーを表示した時
**THEN** システムは以下の色分けで日付を表示すること：
- 赤色：未入力
- 緑色：承認待ち
- グレー：承認済み

**受け入れ基準:**
- 各ステータスが明確に識別可能である
- 色覚多様性に配慮したアクセシビリティ対応
- ツールチップでステータステキストを表示

### REQ-4: 日付ナビゲーション
**WHEN** ユーザーがカレンダーの日付をクリックした時
**THEN** システムはその日付の工数入力画面に遷移すること

**受け入れ基準:**
- クリック可能な日付にはホバー効果がある
- 遷移後は選択した日付の入力フォームが表示される
- ブラウザの戻るボタンでカレンダーに戻れる

### REQ-5: リアルタイム更新
**WHEN** ユーザーが工数を入力・保存した時
**THEN** カレンダーの該当日付のステータスが即座に更新されること

**受け入れ基準:**
- ページリロード不要で更新される
- 更新アニメーションで変更を視覚的に示す
- エラー時は適切なエラーメッセージを表示

### REQ-6: 月間サマリー表示
**WHERE** カレンダービューの上部において
**THEN** システムは以下の統計情報を表示すること：
- 未入力日数
- 承認待ち日数
- 承認済み日数

**受け入れ基準:**
- 数値は自動集計される
- パーセンテージも併記される
- 月を切り替えても正確に集計される

## 非機能要件

### パフォーマンス要件
- カレンダー初期表示：2秒以内
- ステータス更新：500ms以内
- 月切り替え：1秒以内

### アクセシビリティ要件
- WCAG 2.1 Level AA準拠
- キーボードナビゲーション対応
- スクリーンリーダー対応

### ブラウザ互換性
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## データ要件

### 必要なAPIエンドポイント
1. `GET /api/work-records/monthly-status` - 月次ステータス取得
2. `GET /api/work-records/missing-dates` - 未入力日リスト取得

### レスポンス形式
```json
{
  "year": 2025,
  "month": 1,
  "dates": [
    {
      "date": "2025-01-01",
      "status": "NOT_ENTERED",
      "isWeekend": false,
      "isHoliday": true
    }
  ],
  "summary": {
    "notEntered": 5,
    "pending": 3,
    "approved": 10
  }
}
```

## UI/UXガイドライン

### ビジュアルデザイン
- マテリアルデザイン準拠（Vuetify使用）
- レスポンシブデザイン対応
- ダークモード対応

### インタラクション
- ホバー効果でインタラクティブ要素を明示
- トランジション効果で状態変化を滑らかに
- ローディング状態の明示

## 依存関係
- 既存の工数記録システム（WorkRecord entity）
- 承認ワークフローシステム（ApprovalStatus）
- ユーザー認証システム（JWT）

## 制約事項
- 過去データは最大3ヶ月まで表示
- 未来の日付は入力対象外
- 承認済みデータの変更は不可